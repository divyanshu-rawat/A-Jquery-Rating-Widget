<!DOCTYPE html>
<html xmlns = "http://www.w3.org/1999/xhtml">
<head>

    <title>Untitled Document</title>

    <meta http-equiv = "Content-Type" content = "text/html; charset = utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="keywords" content="">
    <style type="text/css">
body {
   font-family: Verdana;
  }
  h1, h2, h3 {
   color: black;
  }
  .rating-circle {
   height: 1.5em;
   width: 1.5em;
   border: .1em solid black;
   border-radius: 1.1em;
   display: inline-block;
   margin: 1.5px;
   padding: 1px;
  }
  .rating-hover {
   background-color: black;
  }

  .rating-chosen {
   background-color: lawngreen;
  }
  
    </style>

    <script src = "http://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>

</head>


<body>



<h1>Web Developer Conference</h1>
<div>This session is about identifying elements using jQuery methods and selectors.</div>
 <h2>Finding elements using jQuery</h2>
 <h3>Rate this session</h3>
<div id="rating-container" max-value="5">
        <div class="rating-circle"></div>
        <div class="rating-circle"></div>
        <div class="rating-circle"></div>
        <div class="rating-circle"></div>
        <div class="rating-circle"></div>
 </div>
    <div>
        <label for="max-value">Enter max value:</label>
        <input type="text" id="max-value" />
        <button type="button" id="update-max-value">Update max value</button>
    </div>
    <br>
    <div>
        <button type="button" id="save-rating">Save rating</button>
    </div>
    <div id="output"></div>
</body>
<script type="text/javascript"> 
    $(function(){
        $("#update-max-value").click(function(){
            $object=$("#max-value").val();
            $("#rating-container").attr("max-value",$object);
            $("#rating-container").empty();
            for (i=0; i<$object ;i++) 
            { 
                $("#rating-container").append("<div class='rating-circle'></div>");
            }
        });
    
         $("#rating-container").on("mouseover","div.rating-circle",function(){
          $(this).removeClass("rating-chosen");
          $(this).prevAll().removeClass("rating-chosen");
          $(this).nextAll().removeClass("rating-chosen");
          $(this).addClass("rating-hover");
          $(this).prevAll().addClass("rating-hover");
        });
          $("#rating-container").on("mouseout","div.rating-circle",function(){
          $(this).removeClass("rating-hover"); 
          $(this).prevAll().removeClass("rating-hover");
          $(jquery_object).addClass("rating-chosen");      
          $(jquery_object).prevAll().addClass("rating-chosen");
        });
            $("#rating-container").on("click","div.rating-circle",function(){
            index=$(this).index();
            var access_element=$("#rating-container").children().get(index);
            jquery_object=$(access_element);
            $(jquery_object).addClass("rating-chosen");
            $(jquery_object).prevAll().addClass("rating-chosen");
            $(jquery_object).nextAll().removeClass("rating-chosen");
        });
    });
    
    $("#save-rating").click(function(){
                   var person={value:(index+1), maxValue:document.getElementById("rating-container").getAttribute("max-value")};
                   $.post("http://jquery-edx.azurewebsites.net/api/Rating",person).done(function(message){
                   $("#output").text(message.message);       
                }); 
              });  
</script>
</html>


<!--$(".rating-circle").mouseover(function(){
            var index=$(this).index();
            var access_element=$("#rating-container").children().get(index);
            var jquery_object=$(access_element);
            $(jquery_object).removeClass("rating-chosen");
            $(jquery_object).prevAll().removeClass("rating-chosen");
            $(jquery_object).addClass("rating-hover");
            $(jquery_object).prevAll().addClass("rating-hover");
        });
         $(".rating-circle").mouseout(function(){
            var index=$(this).index();
            var access_element=$("#rating-container").children().get(index);
            var jquery_object=$(access_element);
            $(jquery_object).removeClass("rating-hover");
            $(jquery_object).prevAll().removeClass("rating-hover");
        });
         
            $(".rating-circle").click(function(){
            var index=$(this).index();
            var access_element=$("#rating-container").children().get(index);
            var jquery_object=$(access_element);
            $(jquery_object).addClass("rating-chosen");
            $(jquery_object).prevAll().addClass("rating-chosen");
        });!-->